; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:pico2]
; 使用本地下载的平台代码
platform = file://platform-raspberrypi-develop/platform-raspberrypi-develop
board = rpipico2
framework = picosdk

; RP2350 编译配置
build_flags = 
    -DPICO_DEBUG_MALLOC
    -DPICO_STDIO_USB_CONNECT_WAIT_TIMEOUT_MS=0
    -DLIB_PICO_STDIO_USB=1
    ; 调试选项
    -DPICO_DEOPTIMIZED_DEBUG=1
    ; 栈大小增加（支持浮点printf需要更多栈）
    -DPICO_STACK_SIZE=0x1000
    ; 启用浮点printf支持
    -DPICO_PRINTF_ALWAYS_INCLUDED=1
    -DPICO_FLOAT_SUPPORT_ROM_V1=1

; 库依赖 - 使用本地QP/C库
; QP/C库已在lib/qpc_7.3.4_qv目录中
lib_deps =

; 无需额外构建脚本
extra_scripts =

; 调试配置 - 使用 Picoprobe（RP2040 作为调试器）
; debug_tool = picoprobe
; upload_protocol = picoprobe
; debug_speed = 5000          ; Picoprobe 调试速度（kHz）

; 串口监视器
monitor_speed = 115200
monitor_filters = direct

